# Sincronizaci√ìn PID lazo abierto

## 1. Introducci√≥n 

El dise√±o de controladores es fundamental en la ingenier√≠a de control para automatizar procesos y hacerlos funcionar correcta y eficientemente. Uno de los m√©todos de esta √°rea de estudio es dise√±ar controladores de tipo PID (Proporcional, integral y derivativo), debido a su sencilles y efectividad que mejora el comportamiento de nuestros sistemas. Los controladores tienen dos formas de funcionar, las cuales son con retroalimentaci√≥n (Lazo cerrado) y sin retroalimentaci√≥n (Lazo abierto). Cuando hablados de dise√±o de controladores en lazo abierto, nos referimos a cuando el controlador hace su trabajo sin tener en cuenta la retroalimentaci√≥n del sistema durante su proceso. La sincronizaci√≥n PID en lazo abierto nos permite calcular varios de los par√°metros de forma m√°s directa, aprovechando herramientas tales como frecuencia, ubicaci√≥n de polos o ajustes en base al comportamiento deseado.

En la clase se explicaron fundamentos del PID por cada una de sus partes, y como en base a cada uno de sus componentes nuestro sistema va a variar, como por ejemplo en nuestro tiempo de respuesta, oscilaciones, estabilidad y en el error estacionario; as√≠ como se describieron las ventajas y desventajas que se pueden presentar al usar este m√©todo de sincronizaci√≥n. En el siguiente resumen se explicar√° el tema trabajado en la clase de sincronizaci√≥n de PID en lazo abierto describiendo las acciones del controlador, sus tipos de arquitectura, como lograr la sincronizaci√≥n en lazo abierto y algunos de los m√©todos para probar esto.


## 2. Acciones de control

### 2.1. Acci√≥n proporcional

La acci√≥n proporcional se llama as√≠, debido a que esta es proporcional a la se√±al del error. Esta multiplica nuestra se√±al del error por una ganancia Kp que determina cuanta ser√° esta acci√≥n del controlador, por lo que podemos inferir que esta es √∫til cuando se tiene un solo error en el sistema. Como es una multiplicaci√≥n la ecuaci√≥n que representa lo que pasa en la acci√≥n proporcional es la siguiente:

$$u(t) = Kp * e(t)$$
$$U(S) = Kp * E(S)$$

Cuando aumentamos la acci√≥n proporcional nos ocurrir√° lo siguiente:

- Aumenta la velocidad del sistema
- Disminuye el error del sistema
- El sistema se vuelve m√°s inestable

### 2.2. Acci√≥n integral 

La acci√≥n integral se puede describir como la suma o acumulaci√≥n de la se√±al del error; esto debido a que toma esta se√±al y la integra para que mientras se observa el sistema con esta acci√≥n despu√©s de un tiempo se podr√°n ver peque√±os errores que se sumaran haciendo que la acci√≥n integral sea mayor. Por lo tanto, si nuestro error tiende a cero esta acci√≥n lo disminuye cada vez m√°s, hasta que llegue a cero. Por lo que las f√≥rmulas son las siguientes:

$$u(t) = K_{i} \int  e(t)dt$$
$$U(S) = K_{i} * \frac{E(S)}{S}$$


Cuando aumentamos la acci√≥n integral pasar lo siguiente:

- Disminuye el error en r√©gimen permanente
- Aumenta la velocidad del sistema
- El sistema se vuelve m√°s inestable


### 2.3. Acci√≥n derivativa 

La acci√≥n derivativa es proporcional a la derivada de la se√±al del error, por lo que tendremos una ganancia Kd que multiplicaremos por el error para poder disminuir las variaciones del error en el sistema. Como es una multiplicaci√≥n la f√≥rmula es la siguiente:

$$u(t) = K_{d} * \frac{de(t)}{dt}$$
$$U(S) = K_{d} * sE(S)$$

![](Imagenes/CurvaDerivativa.PNG).

Figura 1. Grafica curva accion derivativa

Aumentar la constante derivativa tiene los siguientes efectos en el sistema:

- Aumenta la estabilidad del sistema
- El error en r√©gimen permanente funciona igual
- Disminuye la velocidad del sistema


## 3. Arquitecturas PID

La arquitectura PID es aquella que nos permite combinar de diferentes maneras las acciones de control (Proporcional, Integral y Derivativa). A continuaci√≥n se ver√°n las 3 arquitecturas cl√°sicas.

![](Imagenes/DBControladorPID.PNG).

Figura 2. Diagrama de bloques controlador PID.

### 3.1. Arquitectura paralela 

Lo que se hace en la arquitectura paralela es tomar nuestra tres acciones de control, sumarlas directamente y multiplicarlas por el error, para despu√©s sumar nuestro controlador PID a nuestra funci√≥n de transferencia para estabilizar el sistema.

$$U(S) = Kp * E(S) + K_{i} * \frac{E(S)}{S} +  K_{d} * sE(S)$$
$$u(t) = Kp * e(t) + K_{i} \int  e(t)dt + K_{d} * \frac{de(t)}{dt}$$

![](Imagenes/ArquitecturaP.PNG).

Figura 3. Arquitectura paralela circuito. 

### 3.2. Arquitectura ideal

En la arquitectura ideal lo que se hace es multiplicar el error por la suma de nuestras acciones integral y derivativa, para despues multiplicar esta se√±al por nuestra accion proporcional. Esto se hace por que al multiplicar nuestro error por nuestra accion proporcional se vuelve muy grande, por lo que al mutiplicarlo primero por las otras dos acciones este se vuelve menos significativo.

$$U(s) = Kp * (E(s) + \frac{1}{Ti} * \frac{E(s)}{s} + Td * s * E(s))$$
$$u(t) = Kp * (e(t) + \frac{1}{Ti} * \int e(t)dt + Td\frac{de(t)}{dt} )$$

![](Imagenes/ArquitecturaI.PNG).

Figura 4. Arquitectura ideal circuito.

### 3.3. Arquitectura serie

La arquitectura en serie es la es la que mejor funciona cuando queremos hacer un control PID, pero por lo mismo es la m√°s compleja de todas. Esta pasa primero por la acci√≥n derivativa, para despu√©s multiplicarla por la acci√≥n derivativa y la acci√≥n integral despu√©s de pasar por el diagrama de bloques como se muestra en la figura 6

$$U(s) = ((E(s)(1 + Td * s))Kp)(1 + \frac{1}{Ti * s})$$
$$u(t) = \frac{1}{Ti} \int ((e(t) + Td\frac{de(t)}{dt})Kp)dt$$

![](Imagenes/ArquitecturaS.PNG).

Figura 5. Arquitectura serie circuito 

## 4. Sincronizaci√≥n por prueba y error

La sincronizacion por prueba y error se hace para ajustar las ganancias (Kp, Ki, Kd) para obtener la respuesta que se necesite. La metodologia que se suele utilizar es la siguiente:

- Ajustamos las ganancias Ki y Kd a cero.
- Aumentamos la ganancia Kp hasta tener el tiempo de establecimiento anhelado.
- Aumentamos Ki hasta tener el sobreimpulso anhelado.
- Aumentamos Kd hasta reducir las oscilaciones al comportamiento anhelado.
- Volvemos a ajustar la ganancia proporcional Kp.
- Ajustar las dem√°s ganancias para que funcione √≥ptimamente el sistema.


## 5. Criterio de desempe√±o 

### 5.1. Funciones de costo mas utilizadas

Son las que ayudan a saber que tan bien sintonizado esta el error, estos me permiten saber que cambios hace el controlador. Estas son las pruebas mas comunes.

- IE = Integral del error = Se integra para saber que tan bueno √©l es controlador = $\int e(t)dt$
- ISE = Integral del error al cuadrado = Se utiliza para solo tener valores positivos = $\int e(t)^{2}dt$
- IAE = Integral del error absoluto = Se utiliza cuando hay valore muy peque√±os que al elevarlos al cuadrado tienden a cero  = $\int |e(t)|dt$
- ITAE = Integral del error absoluto por el tiempo = Es para cuando el error no disminuye r√°pidamente. = $\int |e(t) * t|dt$

![](Imagenes/IntegralError.PNG).

Figura 6. Graficas integrales del error.

### 5.2. Criterio de sintonizaci√≥n por optimizaci√≥n 

Estas metodolog√≠as buscan minimizar algunos √≠ndices de desempe√±o, utilizando los m√©todos vistos anteriormente. Esto con variaciones en los par√°metros para obtener una funci√≥n de costo que nos permita encontrar un √≥ptimo ideal. 

$$L(t) = f(\int e(t), t)$$

![](Imagenes/Optimo.PNG).

Figura 7. Grafica optimo


## 6. M√©todos de sincronizaci√≥n

### 6.1. M√©todo de Ziegler & Nichols

Este es el primer metodo que se vio en clase, para la sintonizacion de controladores PID en lazo abierto. Este metodo utiliza parametros de primer orden mas tiempo muerto que se obtienen en las curvas de reaccion.
Este metodo nos garantiza que la segunda oscilacion de la respuesta sea 1/4 del maximo pico. 


|Tipo de controlador   | $k_{p}$  | $T_{i}$  | $T_{d}$  |
|---|---|---|---|
| P  | $\frac{\tau}{t_{o}K}$  | ---  | ---  |
| PI  | $\frac{0.9\tau}{t_{o}K}$  | $3.3t_{o}$  | ---  |
| PID  | $\frac{0.9\tau}{t_{o}K}$   | $2t_{o}$  | $0.5t_{o}$  |


![](Imagenes/Perturbacionuncuarto.PNG).

Figura 8. Caida de la respuesta ante perturbaciones

![](Imagenes/CambioReferencia.PNG).

Figura 9. Caida de la respuesta ante cambios en la referencia

Podemos observar en las im√°genes que ante distintas circunstancias, cuando aplicamos el m√©todo de Ziegler y Nichols la curva de reacci√≥n ser√° la esperada, en donde su segunda oscilaci√≥n ser√° un cuarto de la primera.


### 6.2. M√©todo de Cohen-coon

El segundo m√©todo de sintonizaci√≥n en PID de lazo abierto que se explic√≥ en la clase es el de cohen-Coon, el cual tiene algunas similitudes con el de Ziegler y Nichols en cuando a las ganancias integral y derivativas en el PID.

Por lo tanto, al igual que en el m√©todo anterior la segunda oscilaci√≥n tambi√©n ser√° de un cuarto de la primera, y adem√°s tendremos un sobre impulso y √°rea bajo la curva muy reducidas

| Tipo de controlador  | $k_{p}$  | $T_{i}$  | $T_{d}$  |
|---|---|---|---|
| P   | $\frac{1}{K} * \frac{\tau }{t_{o}} * (\frac{3\tau + t_{o}}{3\tau})$  | ---  | ---  |
| PI   | $\frac{1}{K} * \frac{\tau }{t_{o}} * (\frac{10.8\tau + t_{o}}{12\tau})$  | $(\frac{30 + 3(\frac{t_{0}}{\tau })}{9 + 20(\frac{t}{\tau })}) * \tau $  | ---  |
| PID   | $\frac{1}{K} * \frac{\tau }{t_{o}} * (\frac{16\tau + 3t_{o}}{12\tau})$  | $2t_{o}$  | $0.5t_{o}$  |


### 6.3. M√©todo de coeficiente de ajustabilidad

El m√©todo de coeficiente de ajustabilidad ya tiene varias diferencias con respecto a los m√©todos mencionados anteriormente. La primera diferencia est√° en que para escoger las ganancias que se usaran para el PID depender√° de cuanto ser√° la variable "y" la cual est√° determinada por el tiempo muerto sobre el Tao. 

$y = \frac{t_{m}}{\tau }$

Despu√©s de hacer esa operaci√≥n y obtener "y" usaremos los intervalos que se muestran en la siguiente tabla para saber los valores de nuestras ganancias.

 
| y  | $k_{p}$  | $T_{i}$  | $T_{d}$  |
|---|---|---|---|
| 0 a 0.1  | $\frac{5}{K}$  | $\tau$  | ---  |
| 0.1 a 0.2  | $\frac{0.5}{K_{y}}$  | $\tau$  | ---  |
| 0.2 a 0.5  | $\frac{0.5(1 + 0.5_{y})}{K_{y}}$  | $\tau(1 + 0.5_{y})$  | $\tau * \frac{0.5_{y}}{0.5_{y} + 1}$  |


### 6.4. M√©todo Smith (PID)

El m√©todo de Smith es el √∫ltimo que se present√≥ en la clase y este se basa en dos tablas, una nos da valores de unas constantes que nos ayudaran a encontrar cuanto son los valores de las ganancias en un PI. Mientras que el otro nos da tambi√©n unos valores para las constantes, pero esta nos ayudara a encontrar las ganancias de un PID, como se muestra en las siguientes figuras:

![](Imagenes/MSmithPI.PNG).

Figura 10.Metodo Smith PI

![](Imagenes/MSmithPID.PNG).

Figura 11.Metodo Smith PID


## 7. Ejercicios 

üìö Ejercicio 1

En el primer ejercicio se requiere hallar la funcion de trasnferencia de un sistema lazo abierto por el metodo de Ziegler & Nichols, en base a los siguientes datos: 
- k = 2
- $t_{m} = 3 segundos$
- $\tau = 7 segundos$

Lo primero que haremos sera modelar la curva de reaccion de un sistema en lazo abierto.

$$u(t) = K * (1 - e^-{t - t_{m}}/\tau) * u(t - t_{m})  $$

Lo siguiente que hacemos es aplicar la tabla de Ziegler & Nichols, para despejar nuestras ganancias. La primera que se calcula es la ganancia proporcional y los tiempos en el integral y en el derivativo 

$$K_{p} = 1.2 * \frac{\tau }{t_{m}}$$
$$K_{p} = 1.2 * \frac{7}{3}$$
$$K_{p} = 2.8$$

$$T_{i} = 2 * t_{m}$$
$$T_{i} = 2 * 3$$
$$T_{i} = 6$$

$$T_{d} = 0.5t_{m}$$
$$T_{d} = 0.5 * 3$$
$$T_{d} = 1.5$$ 

Ya con eso podemos calcular las ganancias en cada una de las partes del PID

$$K_{p} = 2.8$$

$$K_{i} = \frac{K_{p}}{T_{i}}$$
$$K_{i} = \frac{2.8}{6}$$
$$K_{i} = 0.467$$

$$K_{d} = K_{p} * T_{d}$$
$$K_{d} = 2.8 * 1.5$$
$$K_{d} = 4.2$$

Ya con todas las ganancias podemos poner la funcion de transferencia

$$G(s) = K_{p} + \frac{K_{i}}{s} + K_{d} * s $$
$$G(s) = 2.8 + \frac{0.467}{s} + 4.2 * s$$ 


üìö Ejercicio 2
Para el segundo ejercicio se tiene   la siguiente funcion de transferencia $G(s) = \frac{3e^{-2s}}{8s + 1}$ a la que debemos dise√±ar un controlador PID en lazo abierto por el metodo de coeficiente de ajustabilidad. Para eso tenemos los siguientes datos:

K = 3
$t_{m} = 2$
$\tau = 8$

El primer paso cuando usamos este metodo es hallar nuestra variable "y" la cual se encuentra divideindo mi tiempo muerto entre Tao.

$$y = \frac{t_{m}}{\tau } = \frac{2}{8}$$
y = 0.25

Ya con eso tenemos el intervalo de la tabla que nos sirve para encontrar las ganancias del sistema. La primera que se encuentra es la ganancia prporcional que se resuelve de la siguiente manera:


$$K_{p} = \frac{1}{K} * (\frac{1.35}{y} + 0.25)$$
$$K_{p} = \frac{1}{3} * (\frac{1.35}{0.25} + 0.25)$$
$$K_{p} = 1.88$$

Despues proseguimos con la ganancia integral, a la que le aplicamos la formulas de la tabla y reemplazamos.

$$T_{i} = \tau * \frac{y + 0.1}{y + 0.5}$$
$$T_{i} = 8 * \frac{0.25 + 0.1}{0.25 + 0.5}$$
$$T_{i} = 3.74$$

Por ultimo hallamos la ganancia derivativa, que al igual que en las anteriores es usar la formula y despejar.

$$T_{d} = \tau  * \frac{0.5y}{y + 0.1}$$
$$T_{d} = 8 * \frac{0.5 * 0.25}{0.25 + 0.1}$$
$$T_{d} = 2.86$$

Una vez tenemos nuestras ganancias podemos poner la funcion de transferencia con el coeficiente de ajustabilidad, el cual es el siguiente:

$$Gp(s) = 1.88 (1 + \frac{1}{3.74s} + 2.86s)$$


## 8. Conclusi√≥n

La sincronizaci√≥n de un controlador PID en lazo abierto es una t√©cnica fundamental dentro del dise√±o de sistemas de control, especialmente √∫til en aplicaciones donde no se dispone de retroalimentaci√≥n directa o esta no es pr√°ctica durante la etapa de sintonizaci√≥n inicial. A trav√©s del an√°lisis de las acciones proporcional, integral y derivativa, comprendemos c√≥mo cada una de ellas contribuye de manera distinta al comportamiento del sistema, afectando par√°metros como el tiempo de respuesta, el error estacionario, la estabilidad y las oscilaciones.

Los distintos tipos de arquitecturas PID **paralela**, **ideal** y **serie** ofrecen alternativas de implementaci√≥n seg√∫n las caracter√≠sticas y complejidad del proceso a controlar. De igual manera, los m√©todos de sintonizaci√≥n presentados, como los de **Ziegler-Nichols**, **Cohen-Coon**, **coeficiente de ajustabilidad** y **Smith**, proporcionan gu√≠as sistem√°ticas para ajustar las constantes del controlador y as√≠ lograr un desempe√±o adecuado, buscando un equilibrio entre rapidez de respuesta, precisi√≥n y estabilidad.

En definitiva, la sincronizaci√≥n de PID en lazo abierto, aunque presenta limitaciones al no considerar la retroalimentaci√≥n del sistema durante el ajuste, resulta ser una herramienta efectiva para el dise√±o preliminar de controladores. El √©xito de esta t√©cnica radica en la correcta selecci√≥n del m√©todo de sintonizaci√≥n y en el an√°lisis detallado del proceso, permitiendo as√≠ un punto de partida s√≥lido para un ajuste fino posterior bajo lazo cerrado si es necesario.



## 9. Referencias

- Ajuste emp√≠rico controladores PID. F Morilla. Dpto. Informatica y Autom√°tica, UNED, 2006
- Handbook of PI and PID controller Tuning Rules, Aidan O‚ÄôDwyer, 3d edition, 2009
- Analog & Digital Control Systems Design. Chi Tsong Chen. State University of New York. New York
- Principles and practice of automatic process control. Smith. C. and A. Corripio. 2 Edition. Jhon Wiley & Sons Editorial
